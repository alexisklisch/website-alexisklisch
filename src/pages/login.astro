---
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import Layout from "../layouts/Layout.astro"
---

<Layout title="Login">
  <Header />
  <form class="pt-36 max-w-2xl mx-auto grid gap-6 justify-items-center" id="form">
    <label for="email"
      >Email
      <input name="email" type="email" />
    </label>
    <label for="password"
      >Password
      <input name="password" type="password" />
    </label>
    <button class="p-3 px-5 border border-brand-yellow rounded-full">Loguearse</button>
  </form>
  <Footer />
</Layout>

<script>
  const $ = (selector: string) => document.querySelector(selector)
  const $form = $("#form")
  const $testBtn = $("#test")

  $form!.addEventListener("submit", e => {
    e.preventDefault()

    // @ts-ignore
    const formData = Object.fromEntries(new FormData(e.target))
    const body = JSON.stringify(formData)
    console.log(body)

    fetch("http://localhost:3001/v1/auth/login", {
      method: 'POST',
      body,
      headers: {
        'Content-Type': 'application/json'
      },
    })
      .then(res => res.json())
      .then(data => console.log(data))
      .catch(err => console.error('Ocurri√≥ un error', err))
  })
</script>
